<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="css/global.css" />
		<link rel="stylesheet" href="css/keyboard.css" />
		
		<!-- Aural is library-agnostic -->
		<script src="../src/aural.js"></script>

		<script src="../src/aural.utils.xhr.js"></script>

		<script src="../src/aural.music.tuning.js"></script>
		<script src="../src/aural.music.note.js"></script>
		<script src="../src/aural.music.scale.js"></script>
		<script src="../src/aural.music.scalelist.js"></script>
		<script src="../src/aural.music.scalelist.definitions.js"></script>
		<script src="../src/aural.music.chord.js"></script>
		<script src="../src/aural.music.chordlist.js"></script>
		<script src="../src/aural.music.chordlist.definitions.js"></script>
		
		<script src="http://cdnjs.cloudflare.com/ajax/libs/mootools/1.4.5/mootools-core-full-compat-yc.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/mootools-more/1.4.0.1/mootools-more-yui-compressed.js"></script>
	</head>
	<body>
		<div class="keyboard">
			<div class="whitekey c">C2</div>
			<div class="blackkey c-sharp">C#2</div>
			<div class="whitekey d">D2</div>
			<div class="blackkey d-sharp">D#2</div>
			<div class="whitekey e">E2</div>
			<div class="whitekey f">F2</div>
			<div class="blackkey f-sharp">F#2</div>
			<div class="whitekey g">G2</div>
			<div class="blackkey g-sharp">G#2</div>
			<div class="whitekey a">A2</div>
			<div class="blackkey a-sharp">A#2</div>
			<div class="whitekey b">B2</div>
			<div class="whitekey c">C3</div>
			<div class="blackkey c-sharp">C#3</div>
			<div class="whitekey d">D3</div>
			<div class="blackkey d-sharp">D#3</div>
			<div class="whitekey e">E3</div>
			<div class="whitekey f">F3</div>
			<div class="blackkey f-sharp">F#3</div>
			<div class="whitekey g">G3</div>
			<div class="blackkey g-sharp">G#3</div>
			<div class="whitekey a">A3</div>
			<div class="blackkey a-sharp">A#3</div>
			<div class="whitekey b">B3</div>
			<div class="whitekey c">C4</div>
			<div class="blackkey c-sharp">C#4</div>
			<div class="whitekey d">D4</div>
			<div class="blackkey d-sharp">D#4</div>
			<div class="whitekey e">E4</div>
			<div class="whitekey f">F4</div>
			<div class="blackkey f-sharp">F#4</div>
			<div class="whitekey g">G4</div>
			<div class="blackkey g-sharp">G#4</div>
			<div class="whitekey a">A4</div>
			<div class="blackkey a-sharp">A#4</div>
			<div class="whitekey b">B4</div>
			<div class="whitekey c">C5</div>
			<div class="blackkey c-sharp">C#5</div>
			<div class="whitekey d">D5</div>
			<div class="blackkey d-sharp">D#5</div>
			<div class="whitekey e">E5</div>
			<div class="whitekey f">F5</div>
			<div class="blackkey f-sharp">F#5</div>
			<div class="whitekey g">G5</div>
			<div class="blackkey g-sharp">G#5</div>
			<div class="whitekey a">A5</div>
			<div class="blackkey a-sharp">A#5</div>
			<div class="whitekey b">B5</div>
			<div class="whitekey c">C6</div>
			<div class="blackkey c-sharp">C#6</div>
			<div class="whitekey d">D6</div>
			<div class="blackkey d-sharp">D#6</div>
			<div class="whitekey e">E6</div>
			<div class="whitekey f">F6</div>
			<div class="blackkey f-sharp">F#6</div>
			<div class="whitekey g">G6</div>
			<div class="blackkey g-sharp">G#6</div>
			<div class="whitekey a">A6</div>
			<div class="blackkey a-sharp">A#6</div>
			<div class="whitekey b">B6</div>
		</div>
		
		<div id="log">
			
		</div>
		
		<script>

			document.addEvent('domready', function() {
				var log = $('log');
				
				var clearLog = function() {
					log.empty();
				};
				
				var showLog = function(msg) {
					log.innerHTML += msg + '<br />';
				};
				
				showLog('Select at least 2 keys and find out the matching chords.');
				
				var elements = $$('.keyboard div');
				
				var searchScales = function() {
					var keys = $$('.keyboard div.active').get('text').unique();
					
					clearLog();
					
					showLog('SELECTION : ' + keys.join(', '));
					
					if(keys.length > 1) {
						var chords = Aural.Music.ChordList.fits(keys);

						for(var i = 0, l = chords.length; i < l; i++) {
							showLog(chords[i].key + chords[i].octave + ' ' + chords[i].name + ' (' + chords[i].key + chords[i].shortname + ')');
						}
					} else {
						showLog('Select at leat 2 keys.');
					}
				};
				
				elements.addEvent('click', function() {
					this.toggleClass('active');
					searchScales();
				});
			});

		</script>
	</body>
</html>